(function(){"use strict";angular.module("bananaUpp",["ngRoute"]).config(["$routeProvider",function(a){return a.when("/community",{templateUrl:"views/community.html",controller:"CommunityCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).when("/latest",{templateUrl:"views/one-banana.html",controller:"OneBananaCtrl"}).when("/banana/:day",{templateUrl:"views/one-banana.html",controller:"OneBananaCtrl"}).when("/all",{templateUrl:"views/all-bananas.html",controller:"AllBananasCtrl"}).otherwise({redirectTo:"/latest"})}])}).call(this),function(){"use strict";var a;a=function(){function a(b,c,d){var e,f,g,h,i,j,k,l,m=this;f="bananas",g="config.json",h=""+f+"/"+g,e=[],k=function(){return e=d("orderBy")(e,"day")},j=function(){return e&&e.length?e[e.length-1]:void 0},i=function(a){var b;return b=d("filter")(e,{day:a}),b&&b.length?b[0]:void 0},l=function(){var a,b,c,d,f,g;for(c=e.length,g=[],b=d=0,f=e.length;f>d;b=++d)a=e[b],a.order=b+1,b>0&&(a.prev=e[b-1].day),c-1>b?g.push(a.next=e[b+1].day):g.push(void 0);return g},this.init=function(){var a;return a=c.defer(),b.get(h).then(function(b){return e=b.data.bananas,k(),l(),a.resolve()},function(){return console.error("create '"+h+"' file !!!"),a.reject("config file not found")}),m.loadingPromise=a.promise},this.init(),this.waitUntilLoaded=function(){return this.loadingPromise},a.prototype.getBananas=function(){return this.waitUntilLoaded().then(function(){return e})},a.prototype.getLatestBanana=function(){return this.waitUntilLoaded().then(function(){return j()})},a.prototype.getBanana=function(a){return this.waitUntilLoaded().then(function(){return i(a)})},a.prototype.getBasePath=function(){return f}}return a}(),angular.module("bananaUpp").service("BananasService",["$http","$q","$filter",a])}.call(this),function(){"use strict";angular.module("bananaUpp").controller("AllBananasCtrl",["$scope","BananasService",function(a,b){return b.getBananas().then(function(b){return a.bananas=b})}])}.call(this),function(){"use strict";angular.module("bananaUpp").controller("OneBananaCtrl",["$scope","BananasService","$routeParams",function(a,b,c){var d,e;return d=c.day,e=function(c,d){return c?(c.url=b.getBasePath()+"/"+c.day+"/"+c.index,c.latest=d,a.banana=c):a.banana=void 0},d?b.getBanana(d).then(function(a){return e(a,!1)}):b.getLatestBanana().then(function(a){return e(a,!0)})}])}.call(this),function(){"use strict";angular.module("bananaUpp").controller("CommunityCtrl",["$scope","BananasService","$routeParams",function(){}])}.call(this),function(){"use strict";angular.module("bananaUpp").controller("HistoryCtrl",["$scope","BananasService","$routeParams",function(){}])}.call(this);